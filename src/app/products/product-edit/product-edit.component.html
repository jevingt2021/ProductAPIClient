<h1>New Product</h1>
<p>{{product | json}}</p>
<form (ngSubmit)="submit()">
    <div class="form-group">
        <label for="category"></label>
        <select id="category" class="form-control" [(ngModel)]="product.productCategoryId" (change)="onCategoryChange()"
            name="productCategoryId">
            <option value=""></option>
            <option *ngFor="let c of categories" value="{{c.id}}">{{c.productCategoryName}}</option>
        </select>
    </div>
    <h2>Product Info</h2>
    <div class="formgroup">
        <label for="productName">Product Name</label>
        <input id="productName" type="text" class="form-control" [(ngModel)]="product.name" name="productName">
    </div>
    <div class="formgroup">
        <label for="description">Description</label>
        <input id="description" type="text" class="form-control" [(ngModel)]="product.description" name="description">
    </div>
    <div class="formgroup">
        <label for="type">Type</label>
        <input id="type" type="text" class="form-control" [(ngModel)]="product.type" name="type">
    </div>
    <div class="formgroup">
        <label for="expiry">Expiry</label>
        <input id="expiry" type="date" class="form-control" [(ngModel)]="product.expiry" name="type">
    </div>
    <div class="formgroup">
        <label for="productDate">Date</label>
        <input id="productDate" type="date" class="form-control" [(ngModel)]="product.date" name="productDate">
    </div>
    <div class="formgroup">
        <label for="price">Price</label>
        <input id="price" type="number" step="0.01" class="form-control" [(ngModel)]="product.price" name="price">
    </div>
    <div class="formgroup">
        <label for="lastupdatedby">Last Updated By</label>
        <input id="lastupdatedby" type="text" class="form-control" [(ngModel)]="product.lastUpdatedBy"
            name="lastupdatedby">
    </div>

    <div class="container mt-3 bottom-marg">
        <div class="row">
            <div class="col-lg-4 ">
                <span class="mt-2">Product Photo </span>
            </div>
            <div class="col-lg-8">
                <label for="file-upload" class="custom-file-upload ">
                    Choose Files
                </label>
                <input id="file-upload" type="file" (change)="prepareImageFilesList($event.target.files)" />
                <span class="m-l-20">
                    <label class="single-file m-r-10" *ngFor="let file of files ; let i = index">
                        <img [src]="file.image" alt="" width="40" height="40">
                        <span class="delete" (click)="deleteFile(i)">
                            <svg class="svg-style" xmlns="http://www.w3.org/2000/svg" width="14" height="18"
                                viewBox="0 0 14 18">
                                <path fill="#B1B1B1" fill-rule="nonzero"
                                    d="M1 16c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H3c-1.1 0-2 .9-2 2v10zm3.17-7.83a.996.996 0 0 1 1.41 0L7 9.59l1.42-1.42a.996.996 0 1 1 1.41 1.41L8.41 11l1.42 1.42a.996.996 0 1 1-1.41 1.41L7 12.41l-1.42 1.42a.996.996 0 1 1-1.41-1.41L5.59 11 4.17 9.58a.996.996 0 0 1 0-1.41zM10.5 1L9.79.29C9.61.11 9.35 0 9.09 0H4.91c-.26 0-.52.11-.7.29L3.5 1H1c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1h-2.5z" />
                            </svg>
                        </span>
                        <div>
                            <p class="font-13">{{file.fileName}}</p>
                        </div>
                    </label>
                </span>
            </div>
        </div>
    </div>
    <div class="formgroup">
        <button  *ngIf="product.id == null"class="btn btn-primary" type="submit">
            Save
        </button>
        <button *ngIf="product.id" class="btn btn-primary" type="button" (click)="updateProduct()">
            Update
        </button>
        <button *ngIf="product.id" class="btn btn-primary" type="button" (click)="deleteProduct()">
            Delete
        </button>
    </div>
</form>